<section
  class="user-list-container p-6 rounded-xl bg-surface-container-high text-on-surface shadow-md max-w-5xl mx-auto"
>
  <h2 class="text-2xl font-semibold mb-4">Gesti√≥n de Usuarios</h2>

  @if (isLoading) {
    <div class="flex items-center justify-center py-6 text-gray-500">
      <mat-progress-spinner
        diameter="32"
        mode="indeterminate"
        color="primary"
      ></mat-progress-spinner>
      <span class="ml-3 text-base">Cargando usuarios...</span>
    </div>
  }

  @if (!isLoading && users.length > 0) {
    <div class="overflow-x-auto rounded-lg shadow-sm">
      <table
        mat-table
        [dataSource]="users"
        class="w-full min-w-[600px] mat-elevation-z2 bg-surface-container text-on-surface"
      >
        <ng-container matColumnDef="id">
          <th mat-header-cell *matHeaderCellDef class="px-4 py-3 text-left">ID</th>
          <td mat-cell *matCellDef="let user" class="px-4 py-2">
            {{ user.id }}
          </td>
        </ng-container>

        <ng-container matColumnDef="nombre">
          <th mat-header-cell *matHeaderCellDef class="px-4 py-3 text-left">Nombre</th>
          <td mat-cell *matCellDef="let user" class="px-4 py-2">
            {{ user.nombre }}
          </td>
        </ng-container>

        <ng-container matColumnDef="fechaNacimiento">
          <th mat-header-cell *matHeaderCellDef class="px-4 py-3 text-left">
            Fecha de Nacimiento
          </th>
          <td mat-cell *matCellDef="let user" class="px-4 py-2">
            {{ user.fechaNacimiento | date: 'longDate' }}
          </td>
        </ng-container>

        <ng-container matColumnDef="sexo">
          <th mat-header-cell *matHeaderCellDef class="px-4 py-3 text-left">Sexo</th>
          <td mat-cell *matCellDef="let user" class="px-4 py-2">
            {{ user.sexo === 'M' ? 'Masculino' : 'Femenino' }}
          </td>
        </ng-container>

        <ng-container matColumnDef="acciones">
          <th mat-header-cell *matHeaderCellDef class="px-4 py-3 text-center">
            Acciones
          </th>
          <td mat-cell *matCellDef="let user" class="px-4 py-2 text-center">
            <button
              mat-icon-button
              color="primary"
              aria-label="Editar usuario"
              (click)="editUser(user)"
            >
              <mat-icon>edit</mat-icon>
            </button>
            <button
              mat-icon-button
              color="warn"
              aria-label="Eliminar usuario"
              (click)="deleteUser(user.id)"
            >
              <mat-icon>delete</mat-icon>
            </button>
          </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
      </table>
    </div>
  }

  @if (!isLoading && users.length === 0) {
    <div class="text-center py-10 text-gray-500 text-lg">
      No hay usuarios registrados.
    </div>
  }
</section>
